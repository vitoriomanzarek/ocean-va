<style>.va-filters {background: white;padding: 32px 20px;border-bottom: 1px solid #e5e7eb;position: sticky;top: 80px;z-index: 50;box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);}.va-filters.sticky-active {position: fixed;left: 0;right: 0;width: 100%;top: 80px;z-index: 50;padding: 16px 20px;}.va-filters.sticky-active .va-filters-container {max-width: 1400px;margin: 0 auto;gap: 20px;}.va-filters.sticky-active .va-filter-label {margin-bottom: 8px;font-size: 11px;}.va-filters.sticky-active .va-filter-button {padding: 6px 14px;font-size: 13px;}.va-filters.sticky-active .va-search-input {padding: 8px 12px;font-size: 13px;}.va-filters-container {max-width: 1400px;margin: 0 auto;display: grid;grid-template-columns: 1fr 1fr 1fr;gap: 32px;}/* Hide toggle button on desktop */.va-filter-toggle {display: none;}.va-filter-group {display: flex;flex-direction: column;}.va-filter-label {font-size: 12px;font-weight: 700;color: #6b7280;text-transform: uppercase;letter-spacing: 0.5px;margin-bottom: 12px;}.va-filter-options {display: flex;flex-wrap: wrap;gap: 8px;}.va-filter-button {padding: 8px 16px;border: 1px solid #d1d5db;border-radius: 6px;background: white;color: #374151;font-size: 14px;font-weight: 500;cursor: pointer;transition: all 0.2s ease;white-space: nowrap;}.va-filter-button:hover {border-color: #049d98;color: #049d98;}.va-filter-button.active {background: #049d98;color: white;border-color: #049d98;}.va-filter-button.active:hover {background: #037b77;border-color: #037b77;}.va-search-input {padding: 10px 12px;border: 1px solid #d1d5db;border-radius: 6px;font-size: 14px;font-family: inherit;transition: all 0.2s ease;background: white;color: #374151;}.va-search-input:focus {outline: none;border-color: #049d98;box-shadow: 0 0 0 3px rgba(4, 157, 152, 0.1);}.va-search-input::placeholder {color: #9ca3af;}/* Tablet */@media (max-width: 1024px) {.va-filters-container {grid-template-columns: 1fr 1fr;gap: 24px;}}/* Mobile Filter Toggle Button */.va-filter-toggle {display: none;width: 100%;padding: 12px 16px;background: white;border: 1px solid #d1d5db;border-radius: 6px;color: #374151;font-size: 14px;font-weight: 600;cursor: pointer;transition: all 0.2s ease;justify-content: space-between;align-items: center;gap: 8px;}.va-filter-toggle:hover {border-color: #049d98;color: #049d98;}.va-filter-toggle-icon {display: inline-flex;align-items: center;justify-content: center;transition: transform 0.3s ease;font-size: 10px;color: #6b7280;}.va-filter-toggle.active .va-filter-toggle-icon {transform: rotate(180deg);}/* Mobile */@media (max-width: 640px) {.va-filters {padding: 16px;}.va-filter-toggle {display: flex;margin-bottom: 0;}.va-filters-container {display: none;grid-template-columns: 1fr;gap: 20px;margin-top: 16px;padding-top: 16px;border-top: 1px solid #e5e7eb;}.va-filters-container.mobile-open {display: grid;}.va-filter-options {gap: 6px;}.va-filter-button {padding: 8px 12px;font-size: 13px;}.va-filters.sticky-active {padding: 12px 16px;}.va-filters.sticky-active .va-filters-container {margin-top: 12px;padding-top: 12px;}}</style><section class="va-filters"><button type="button" class="va-filter-toggle" id="filterToggle" aria-expanded="false" aria-controls="va-filters-container"><span>Filter by</span><span class="va-filter-toggle-icon"><svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg></span></button><div class="va-filters-container" id="va-filters-container"><div class="va-filter-group"><label class="va-filter-label">Availability</label><div class="va-filter-options" id="availabilityOptions"><button type="button" class="va-filter-button active" data-filter="availability" data-value="All">All</button><button type="button" class="va-filter-button" data-filter="availability" data-value="Full Time">Full Time</button><button type="button" class="va-filter-button" data-filter="availability" data-value="Part Time">Part Time</button><button type="button" class="va-filter-button" data-filter="availability" data-value="Assigned">Assigned</button></div></div><div class="va-filter-group"><label class="va-filter-label">Language</label><div class="va-filter-options" id="languageOptions"><button type="button" class="va-filter-button active" data-filter="language" data-value="All">All</button><button type="button" class="va-filter-button" data-filter="language" data-value="English">English</button><button type="button" class="va-filter-button" data-filter="language" data-value="Bilingual (EN-ES)">Bilingual (EN-ES)</button></div></div><div class="va-filter-group"><label class="va-filter-label">Search by Name</label><inputtype="text"class="va-search-input"id="searchInput"placeholder="Search VA name..."autocomplete="off"></div></div></section><div id="va-results-counter" style="text-align: center;padding: 24px 20px;margin: 20px 0;font-size: 14px;color: #6b7280;font-weight: 500;border-bottom: 1px solid #e5e7eb;">Showing 62 of 62 VAs</div><script>// Get filter elementsconst searchInput = document.getElementById('searchInput');const availabilityButtons = document.querySelectorAll('[data-filter="availability"]');const languageButtons = document.querySelectorAll('[data-filter="language"]');// Store current filterslet currentFilters = {search: '',availability: 'All',language: 'All'};// Function to dispatch filter change eventfunction dispatchFilterChange() {const event = new CustomEvent('vaFiltersChanged', {detail: currentFilters,bubbles: true});document.dispatchEvent(event);console.log('Filters changed:', currentFilters);}// Handle availability button clicksavailabilityButtons.forEach(button => {button.addEventListener('click', (e) => {e.preventDefault();// Remove active class from all availability buttonsavailabilityButtons.forEach(btn => btn.classList.remove('active'));// Add active class to clicked buttonbutton.classList.add('active');// Update filtercurrentFilters.availability = button.dataset.value;// Dispatch eventdispatchFilterChange();});});// Handle language button clickslanguageButtons.forEach(button => {button.addEventListener('click', (e) => {e.preventDefault();// Remove active class from all language buttonslanguageButtons.forEach(btn => btn.classList.remove('active'));// Add active class to clicked buttonbutton.classList.add('active');// Update filtercurrentFilters.language = button.dataset.value;// Dispatch eventdispatchFilterChange();});});// Handle search input - real-time filteringsearchInput.addEventListener('input', (e) => {currentFilters.search = e.target.value.trim();dispatchFilterChange();});// Allow Enter key in searchsearchInput.addEventListener('keypress', (e) => {if (e.key === 'Enter') {e.preventDefault();dispatchFilterChange();}});console.log('VA Filters initialized');</script><script>/*** Mobile Filter Toggle* Handles the mobile dropdown toggle for filters*/(function() {const filterToggle = document.getElementById('filterToggle');const filtersContainer = document.getElementById('va-filters-container');if (!filterToggle || !filtersContainer) return;filterToggle.addEventListener('click', function(e) {e.preventDefault();e.stopPropagation();const isOpen = filtersContainer.classList.contains('mobile-open');if (isOpen) {filtersContainer.classList.remove('mobile-open');filterToggle.classList.remove('active');filterToggle.setAttribute('aria-expanded', 'false');} else {filtersContainer.classList.add('mobile-open');filterToggle.classList.add('active');filterToggle.setAttribute('aria-expanded', 'true');}});// Close on outside click (optional)document.addEventListener('click', function(e) {if (!filterToggle.contains(e.target) && !filtersContainer.contains(e.target)) {if (window.innerWidth <= 640) {filtersContainer.classList.remove('mobile-open');filterToggle.classList.remove('active');filterToggle.setAttribute('aria-expanded', 'false');}}});// Handle window resize - show filters on desktop, hide togglefunction handleResize() {if (window.innerWidth > 640) {filtersContainer.classList.add('mobile-open');filterToggle.classList.remove('active');filterToggle.setAttribute('aria-expanded', 'false');}}window.addEventListener('resize', handleResize);// Initial checkhandleResize();console.log('Mobile filter toggle initialized');})();</script><script>/*** Sticky Filter Enhancement* Makes the filter section stay visible even when scrolling past its container* and respects the navbar height*/(function() {const filtersSection = document.querySelector('.va-filters');if (!filtersSection) return;let initialOffsetTop = null;let navbarHeight = null;let isFixed = false;// Detect navbar height dynamicallyfunction getNavbarHeight() {if (navbarHeight !== null) return navbarHeight;// Try common navbar selectorsconst navbar = document.querySelector('nav') ||document.querySelector('.navbar') ||document.querySelector('[class*="nav"]') ||document.querySelector('header');if (navbar) {const height = navbar.offsetHeight || navbar.clientHeight;if (height > 0) {navbarHeight = height;return navbarHeight;}}// Default fallbacknavbarHeight = 80;return navbarHeight;}// Initialize the initial positionfunction initializePosition() {if (initialOffsetTop === null) {initialOffsetTop = filtersSection.offsetTop;}const navHeight = getNavbarHeight();filtersSection.style.top = navHeight + 'px';// Update the sticky-active class top as wellconst styleId = 'va-filters-sticky-style';let style = document.getElementById(styleId);if (!style) {style = document.createElement('style');style.id = styleId;document.head.appendChild(style);}style.textContent = `.va-filters.sticky-active {top: ${navHeight}px !important;}`;}// Check if filters should be fixed - improved logicfunction checkStickyPosition() {if (initialOffsetTop === null) {initializePosition();return;}const scrollTop = window.pageYOffset || document.documentElement.scrollTop;const navHeight = getNavbarHeight();const shouldBeFixed = scrollTop >= initialOffsetTop - navHeight;// Only toggle if state needs to change (prevents flickering)if (shouldBeFixed && !isFixed) {filtersSection.classList.add('sticky-active');isFixed = true;} else if (!shouldBeFixed && isFixed) {filtersSection.classList.remove('sticky-active');isFixed = false;}}// Initializefunction init() {initializePosition();// Wait a bit for page to fully loadsetTimeout(() => {initialOffsetTop = filtersSection.offsetTop;checkStickyPosition();}, 100);}// Update on scroll with throttlinglet ticking = false;window.addEventListener('scroll', () => {if (!ticking) {window.requestAnimationFrame(() => {checkStickyPosition();ticking = false;});ticking = true;}}, { passive: true });// Update on resize (navbar might change height)window.addEventListener('resize', () => {navbarHeight = null; // Reset to recalculateinitialOffsetTop = filtersSection.offsetTop; // Recalculate initial positioninitializePosition();checkStickyPosition();});// Initialize on loadif (document.readyState === 'loading') {document.addEventListener('DOMContentLoaded', init);} else {init();}console.log('Sticky filter enhancement initialized');})();</script><script>/*** VA Grid Filter Listener - Webflow Native Collections* Listens to filter changes and filters Webflow collection cards** Works with Webflow CMS collection items displayed as cards* Reads data from Webflow field attributes*/(function() {// Store current filterslet activeFilters = {search: '',availability: 'All',language: 'All'};// Function to update results counterfunction updateResultsCounter(visibleCount, totalCount) {let counter = document.getElementById('va-results-counter');if (!counter) {// Try multiple selectors to find collection wrapperlet collectionWrapper = document.querySelector('.w-dyn-list') ||document.querySelector('[data-w-id]') ||document.querySelector('[role="region"]') ||document.querySelector('main') ||document.body;if (collectionWrapper) {counter = document.createElement('div');counter.id = 'va-results-counter';counter.style.cssText = `text-align: center;padding: 24px 20px;margin: 20px 0;font-size: 14px;color: #6b7280;font-weight: 500;border-bottom: 1px solid #e5e7eb;`;// Insert before the collection wrapper or at the topif (collectionWrapper.parentNode) {collectionWrapper.parentNode.insertBefore(counter, collectionWrapper);} else {collectionWrapper.insertBefore(counter, collectionWrapper.firstChild);}}}if (counter) {if (visibleCount === 0) {counter.textContent = 'No VAs found matching your filters';counter.style.color = '#ef4444';} else {counter.textContent = `Showing ${visibleCount} of ${totalCount} VA${totalCount !== 1 ? 's' : ''}`;counter.style.color = '#6b7280';}}}// Function to get field value from Webflow cardfunction getFieldValue(card, fieldClass) {// Try multiple selectors for flexibilityconst element = card.querySelector(`[data-field="${fieldClass}"]`) ||card.querySelector(`.${fieldClass}`) ||card.querySelector(`[class*="${fieldClass}"]`);if (!element) return '';let text = element.textContent.trim();// Remove common icons and emojistext = text.replace(/[\u{1F300}-\u{1F9FF}]/gu, ''); // Emojistext = text.replace(/[ðŸŒðŸ“ðŸ’¼ðŸŽ¯ðŸ“…]/g, ''); // Specific iconstext = text.replace(/^\s+|\s+$/g, ''); // Trim again after removing iconsreturn text;}// Function to filter VA cardsfunction filterVACards() {// Find all Webflow collection items - be more specific to avoid counting other collections// Look for VA cards that have the name fieldconst cards = Array.from(document.querySelectorAll('.w-dyn-item')).filter(card => {// Only count cards that have VA-specific fields (name field)return card.textContent.includes('EXPERIENCE') && card.textContent.includes('LANGUAGE');});let visibleCount = 0;if (cards.length === 0) {console.warn('No VA collection items found. Make sure your collection is rendered.');return;}// Debug: Log first card structureif (cards.length > 0) {console.log('First card HTML:', cards[0].innerHTML);console.log('First card classes:', cards[0].className);console.log('All text content:', cards[0].textContent);}cards.forEach((card, index) => {// Get VA data from Webflow fields// Adjust these selectors based on your Webflow collection structureconst name = getFieldValue(card, 'name').toLowerCase();const availability = getFieldValue(card, 'availability');// Language field - try multiple approacheslet language = getFieldValue(card, 'languages') || getFieldValue(card, 'language');// If still empty, extract from text content after "LANGUAGE" labelif (!language) {const textContent = card.textContent;const languageIndex = textContent.indexOf('LANGUAGE');if (languageIndex !== -1) {const afterLanguage = textContent.substring(languageIndex + 8).trim();// Extract language - look for common patternsif (afterLanguage.includes('Bilingual')) {language = 'Bilingual (EN-ES)';} else if (afterLanguage.includes('English')) {language = 'English';} else {// Fallback: get first 50 charslanguage = afterLanguage.substring(0, 50).trim();}}}const mainCategory = getFieldValue(card, 'main-category');// Debug first cardif (index === 0) {console.log('Card 0 - name:', name);console.log('Card 0 - availability:', availability);console.log('Card 0 - language (extracted):', language);console.log('Card 0 - mainCategory:', mainCategory);}// Check search filter (search in name or main category)const searchTerm = activeFilters.search.toLowerCase();const searchMatch = name.includes(searchTerm) || mainCategory.toLowerCase().includes(searchTerm);// Check availability filterconst availabilityMatch = activeFilters.availability === 'All' ||availability.includes(activeFilters.availability);// Check language filterconst languageMatch = activeFilters.language === 'All' ||language.includes(activeFilters.language);// Show/hide card based on all filtersconst shouldShow = searchMatch && availabilityMatch && languageMatch;if (shouldShow) {card.style.display = '';visibleCount++;} else {card.style.display = 'none';}});// Update counterupdateResultsCounter(visibleCount, cards.length);console.log(`Showing ${visibleCount} out of ${cards.length} VA cards`);}// Listen for filter changesdocument.addEventListener('vaFiltersChanged', (e) => {activeFilters = e.detail;console.log('Grid received filter update:', activeFilters);filterVACards();});// Initial filter on page loadwindow.addEventListener('load', () => {filterVACards();});console.log('VA Grid Filter Listener initialized for Webflow collections');})();</script>