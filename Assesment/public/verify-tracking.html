<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracking Verification Tool</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .status-card {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .status-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        .status-item:last-child {
            border-bottom: none;
        }
        .status-ok { color: #22c55e; font-weight: bold; }
        .status-error { color: #ef4444; font-weight: bold; }
        button {
            background: #05bfb9;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        button:hover {
            background: #049d98;
        }
        #results {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>üîç Tracking Verification Tool</h1>
    <p>Esta herramienta verifica que todos los trackers est√©n cargados correctamente.</p>
    
    <button onclick="checkTrackers()">Verificar Trackers</button>
    <button onclick="waitAndCheck()">Esperar y Verificar (recomendado)</button>
    
    <div id="results"></div>
    
    <script>
        function checkTrackers() {
            const results = document.getElementById('results');
            let html = '<div class="status-card"><h2>Resultados de Verificaci√≥n</h2>';
            
            // Check dataLayer
            const dataLayerOk = typeof window.dataLayer !== 'undefined';
            html += `<div class="status-item">
                <span>dataLayer (GTM)</span>
                <span class="${dataLayerOk ? 'status-ok' : 'status-error'}">
                    ${dataLayerOk ? '‚úÖ Activo' : '‚ùå No activo'}
                </span>
            </div>`;
            
            if (dataLayerOk) {
                html += `<div class="status-item">
                    <span>Eventos en dataLayer</span>
                    <span>${window.dataLayer.length} eventos</span>
                </div>`;
            }
            
            // Check gtag
            const gtagOk = typeof gtag !== 'undefined';
            html += `<div class="status-item">
                <span>gtag (GA4/Google Ads)</span>
                <span class="${gtagOk ? 'status-ok' : 'status-error'}">
                    ${gtagOk ? '‚úÖ Activo' : '‚ùå No activo'}
                </span>
            </div>`;
            
            // Check reb2b
            const reb2bOk = typeof window.reb2b !== 'undefined';
            html += `<div class="status-item">
                <span>reb2b (B2B Tracking)</span>
                <span class="${reb2bOk ? 'status-ok' : 'status-error'}">
                    ${reb2bOk ? '‚úÖ Activo' : '‚ùå No activo'}
                </span>
            </div>`;
            
            // Check Leadsy.ai
            const leadsyOk = document.getElementById('vtag-ai-js') !== null;
            html += `<div class="status-item">
                <span>Leadsy.ai Script</span>
                <span class="${leadsyOk ? 'status-ok' : 'status-error'}">
                    ${leadsyOk ? '‚úÖ Cargado' : '‚ùå No cargado'}
                </span>
            </div>`;
            
            // Check if scripts are in Network
            html += `<div class="status-item">
                <span>Verificaci√≥n Network</span>
                <span style="color: #666;">Abre DevTools ‚Üí Network para verificar requests</span>
            </div>`;
            
            html += '</div>';
            
            // Additional info
            if (dataLayerOk && gtagOk) {
                html += '<div class="status-card" style="background: #ecfdf5; border: 1px solid #22c55e;">';
                html += '<h3>‚úÖ Trackers Principales Activos</h3>';
                html += '<p>Los trackers principales (GA4, GTM, Google Ads) est√°n funcionando correctamente.</p>';
                html += '<p><strong>Siguiente paso:</strong> Abre el sitio principal y completa el quiz para verificar eventos personalizados.</p>';
                html += '</div>';
            } else {
                html += '<div class="status-card" style="background: #fef2f2; border: 1px solid #ef4444;">';
                html += '<h3>‚ùå Algunos Trackers No Est√°n Activos</h3>';
                html += '<p><strong>Posibles causas:</strong></p>';
                html += '<ul>';
                html += '<li>Bloqueador de ads activo (AdBlock, uBlock, etc.)</li>';
                html += '<li>Los scripts a√∫n no se han cargado (espera unos segundos y recarga)</li>';
                html += '<li>Error en la carga de scripts (revisa Console para errores)</li>';
                html += '</ul>';
                html += '<p><strong>Soluci√≥n:</strong> Usa el bot√≥n "Esperar y Verificar" o desactiva bloqueadores de ads.</p>';
                html += '</div>';
            }
            
            results.innerHTML = html;
        }
        
        function waitAndCheck() {
            const results = document.getElementById('results');
            results.innerHTML = '<div class="status-card"><p>Esperando 2 segundos para que los scripts se carguen...</p></div>';
            
            setTimeout(() => {
                checkTrackers();
                
                // Intentar obtener GA4 client ID si est√° disponible
                if (typeof gtag === 'function') {
                    try {
                        gtag('get', 'G-VD50K3QXYX', 'client_id', (clientId) => {
                            const results = document.getElementById('results');
                            const additionalInfo = document.createElement('div');
                            additionalInfo.className = 'status-card';
                            additionalInfo.style.background = '#eff6ff';
                            additionalInfo.style.border = '1px solid #3b82f6';
                            additionalInfo.innerHTML = `
                                <h3>‚úÖ Google Analytics 4 - Conectado</h3>
                                <p><strong>Client ID:</strong> ${clientId || 'No disponible'}</p>
                                <p>GA4 est√° funcionando correctamente. Puedes verificar eventos en tiempo real en <a href="https://analytics.google.com/" target="_blank">Google Analytics</a>.</p>
                            `;
                            results.appendChild(additionalInfo);
                        });
                    } catch (e) {
                        console.log('No se pudo obtener GA4 Client ID:', e);
                    }
                }
            }, 2000);
        }
        
        // Auto-check cuando la p√°gina carga (despu√©s de 1 segundo)
        window.addEventListener('load', function() {
            setTimeout(checkTrackers, 1000);
        });
    </script>
</body>
</html>

