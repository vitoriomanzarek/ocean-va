<!--
  VA PROFILE PAGE - DYNAMIC TEMPLATE FOR WEBFLOW
  ===============================================
  
  INSTRUCCIONES DE USO:
  1. Crear una Collection Template en Webflow para "Virtual Assistants"
  2. Copiar este HTML en la página template
  3. Reemplazar los campos dinámicos con los campos reales del CMS
  4. Los campos CMS usan sintaxis: {{field-slug}} o {{field-name}}
  
  NOTAS:
  - Los campos Rich Text (HTML generado) se insertan directamente
  - Los campos Plain Text se usan como texto simple
  - Las imágenes usan {{image.url}} o {{image.src}}
  - Los videos usan {{video-url}}
-->

<!-- ESTILOS: Incluir el archivo de estilos -->
<!-- En Webflow Designer: Settings > Custom Code > Head Code -->
<!-- O incluir: <link rel="stylesheet" href="/path/to/210-VA-profile-styles.html"> -->

<!-- MAIN PROFILE CONTAINER -->
<div class="va-profile-page">
  
  <!-- Back Link -->
  <div class="va-back-link">
    <a href="/ovas-current-vas">
      <svg class="va-back-link-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
      </svg>
      Back to VAs
    </a>
  </div>

  <!-- HERO SECTION -->
  <section class="va-hero-section">
    <div class="va-hero-container">
      
      <!-- Hero Grid: Image + Info -->
      <div class="va-hero-grid">
        
        <!-- Image Container -->
        <div class="va-image-container">
          <div class="va-image-frame">
            <img src="{{image.url}}" alt="{{name}}" loading="lazy">
          </div>
        </div>

        <!-- Info Box -->
        <div class="va-info-box">
          <h1 class="va-profile-name">{{name}}</h1>
          <p class="va-title">{{title}}</p>
          <p class="va-summary">{{summary}}</p>
          
          <!-- Skills Container (Rich Text - HTML generado) -->
          <div class="va-skills-container">
            {{skills-richtext}}
          </div>
        </div>
      </div>

      <!-- Bottom Section: Tools, Equipment, Video -->
      <div class="va-bottom-section">
        <div class="va-tools-grid">
          
          <!-- TOOLS Column -->
          <div>
            <h3 class="va-column-header">TOOLS</h3>
            <div class="va-tools-list">
              {{tools-richtext}}
            </div>
          </div>

          <!-- EQUIPMENT Column -->
          <div>
            <h3 class="va-column-header">EQUIPMENT</h3>
            <div class="va-equipment-list">
              {{equipment-richtext}}
            </div>
          </div>

          <!-- VIDEO Column -->
          <div>
            <h3 class="va-column-header">VIDEO</h3>
            <!-- Video Container (usa JavaScript para extraer video ID) -->
            <div class="va-video-container" 
                 id="va-video-container-{{slug}}"
                 style="background-image: url('{{video-thumbnail}}'); background-size: cover; background-position: center; background-repeat: no-repeat; min-height: 208px; cursor: pointer;">
              <div class="va-video-overlay">
                <div>
                  <svg class="va-video-play-icon" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M6.3 2.841A1.5 1.5 0 004 4.11V15.89a1.5 1.5 0 002.3 1.269l9.344-5.89a1.5 1.5 0 000-2.538L6.3 2.84z"></path>
                  </svg>
                  <div class="va-video-text">CLICK HERE</div>
                </div>
              </div>
            </div>
            
            <!-- Video Modal (generado dinámicamente por script) -->
            <div id="va-video-modal-{{slug}}" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.9); z-index: 9999; align-items: center; justify-content: center;">
              <div style="position: relative; width: 90%; max-width: 900px; aspect-ratio: 16/9;">
                <iframe width="100%" height="100%" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                <button onclick="document.getElementById('va-video-modal-{{slug}}').style.display='none'" style="position: absolute; top: -50px; right: 0; background: transparent; border: none; font-size: 40px; cursor: pointer; color: white; padding: 0; line-height: 1; font-weight: bold;">×</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Thumbnail Description -->
        <div class="va-thumbnail-box">
          <p class="va-thumbnail-text">{{thumbnail-description}}</p>
        </div>

        <!-- Tagline -->
        <div class="va-tagline-box">
          <p class="va-tagline-text">{{tagline}}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- EMPLOYMENT SECTION -->
  <section class="va-employment-section" style="background: transparent;">
    <div class="va-employment-container">
      <h2 class="va-section-title">EMPLOYMENT SUMMARY</h2>
      <p class="va-employment-summary">{{employment-summary}}</p>
      
      <h3 class="va-employment-history-title">EMPLOYMENT HISTORY</h3>
      <div class="va-employment-list">
        {{employment-richtext}}
      </div>
    </div>
  </section>

  <!-- ASSESSMENT RESULTS SECTION -->
  <div style="padding: 48px 16px;">
    <h2 class="va-section-title" style="max-width: 1151px; margin: 0 auto 24px;">ASSESSMENT RESULTS</h2>
    <div class="va-results-row">
      
      <!-- DISC Section -->
      <section class="va-disc-section">
        <div class="va-disc-container">
          <h3 style="font-size: 14px; font-weight: 700; color: white; margin: 0 0 16px 0; text-transform: uppercase; letter-spacing: 0.05em;">
            DISC PERSONALITY RESULT
          </h3>
          <div class="va-disc-result">
            <div class="va-disc-badge">{{disc-type-2}}</div>
            <p class="va-disc-description">{{disc-description}}</p>
          </div>
        </div>
      </section>

      <!-- English Section -->
      <section class="va-english-section">
        <div class="va-english-container">
          <h3 style="font-size: 14px; font-weight: 700; color: white; margin: 0 0 16px 0; text-transform: uppercase; letter-spacing: 0.05em;">
            {{type-of-english-test}}
          </h3>
          <div class="va-english-result">
            <div class="va-english-score">{{english-score-3}}</div>
            <p class="va-english-description">{{english-description}}</p>
          </div>
        </div>
      </section>
    </div>
  </div>

  <!-- CEFR SECTION -->
  <section class="va-cefr-section" style="background: transparent;">
    <div class="va-cefr-container">
      <h2 class="va-section-title">COMMON EUROPEAN FRAMEWORK OF REFERENCE FOR LANGUAGES (CEFR)</h2>
      <div class="va-cefr-grid">
        {{cerf-result}}
      </div>
      <div class="va-cefr-categories">
        <div>BEGINNER</div>
        <div>INTERMEDIATE</div>
        <div>ADVANCED</div>
      </div>
    </div>
  </section>

  <!-- EDUCATION SECTION -->
  <section class="va-education-section" style="padding: 48px 16px;">
    <div class="va-education-container">
      <h2 class="va-section-title">EDUCATION</h2>
      <div class="va-education-list">
        {{education-richtext}}
      </div>
    </div>
  </section>
</div>

<!-- CUSTOM CODE: Video Modal Handler -->
<script>
(function() {
  'use strict';
  
  // Extraer video URL del campo CMS
  const videoUrl = '{{video-url}}';
  const slug = '{{slug}}';
  
  if (!videoUrl || !slug) {
    return; // No hay video configurado
  }

  // Función para extraer video ID de YouTube URL
  function extractVideoId(url) {
    if (!url) return null;
    
    // Formatos soportados:
    // https://www.youtube.com/watch?v=VIDEO_ID
    // https://youtu.be/VIDEO_ID
    // https://www.youtube.com/embed/VIDEO_ID
    
    const patterns = [
      /(?:youtube\.com\/watch\?v=|youtu\.be\/|youtube\.com\/embed\/)([^&\n?#]+)/,
      /youtube\.com\/.*[?&]v=([^&\n?#]+)/
    ];
    
    for (const pattern of patterns) {
      const match = url.match(pattern);
      if (match && match[1]) {
        return match[1];
      }
    }
    
    return null;
  }

  const videoId = extractVideoId(videoUrl);
  
  if (!videoId) {
    return; // No se pudo extraer el video ID
  }

  const containerId = `va-video-container-${slug}`;
  const modalId = `va-video-modal-${slug}`;
  const embedUrl = `https://www.youtube.com/embed/${videoId}`;

  // Configurar click handler para abrir modal
  const container = document.getElementById(containerId);
  const modal = document.getElementById(modalId);
  
  if (container && modal) {
    container.addEventListener('click', function() {
      const iframe = modal.querySelector('iframe');
      if (iframe) {
        iframe.src = embedUrl;
      }
      modal.style.display = 'flex';
    });
  }
})();
</script>
